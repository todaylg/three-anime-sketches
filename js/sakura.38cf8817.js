(function(t){function e(e){for(var i,a,s=e[0],l=e[1],u=e[2],c=0,m=[];c<s.length;c++)a=s[c],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],i=!0,s=1;s<r.length;s++){var l=r[s];0!==n[l]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var i={},n={sakura:0},o=[];function a(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=i,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/three-anime-sketches/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=l;o.push([1,"chunk-vendors","chunk-common"]),r()})({1:function(t,e,r){t.exports=r("a9ba")},1578:function(t,e,r){},"1a2e":function(t,e,r){"use strict";var i=r("1578"),n=r.n(i);n.a},"32bc":function(t,e,r){t.exports=r.p+"img/megumi_sp.7845f934.png"},a9ba:function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"isLoading",attrs:{id:"wrapper"}},[r("div",{attrs:{id:"canvasContainer"}}),r("div",{staticClass:"animeName"},[t._v("冴えない彼女の育てかた")]),r("div",{staticClass:"scrollNextIcon"},[r("div",[r("span",{on:{click:function(e){return t.toPrePage()}}})])]),r("p",{staticClass:"loadingText"},[t._v("Loading...")])])},o=[],a=(r("c0b6"),r("d4ec")),s=r("bee2"),l=r("5a89"),u=(r("ace4"),r("d3b7"),r("cfc3"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),function(){function t(){Object(a["a"])(this,t),this.velocity=new Array(3),this.rotation=new Array(3),this.position=new Array(3),this.euler=new Array(3),this.size=1,this.alpha=1,this.zkey=0}return Object(s["a"])(t,[{key:"setVelocity",value:function(t,e,r){this.velocity[0]=t,this.velocity[1]=e,this.velocity[2]=r}},{key:"setRotation",value:function(t,e,r){this.rotation[0]=t,this.rotation[1]=e,this.rotation[2]=r}},{key:"setPosition",value:function(t,e,r){this.position[0]=t,this.position[1]=e,this.position[2]=r}},{key:"setEulerAngles",value:function(t,e,r){this.euler[0]=t,this.euler[1]=e,this.euler[2]=r}},{key:"setSize",value:function(t){this.size=t}},{key:"update",value:function(t){this.position[0]+=this.velocity[0]*t,this.position[1]+=this.velocity[1]*t,this.position[2]+=this.velocity[2]*t,this.euler[0]+=this.rotation[0]*t,this.euler[1]+=this.rotation[1]*t,this.euler[2]+=this.rotation[2]*t}}]),t}()),h="#define GLSLIFY 1\nattribute vec3 aEuler;\nattribute float aSize;\n\nvarying vec3 normX;\nvarying vec3 normY;\nvarying vec3 normZ;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main() {\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\tgl_PointSize = aSize * (300.0 / - mvPosition.z);\n\t\n\tvPosition = vec3(mvPosition.xyz);\n\t// Caculate Normal\n\tvec3 elrsn = sin(aEuler);\n \tvec3 elrcs = cos(aEuler);\n \tmat3 rotx = mat3(\n\t\t1.0, 0.0, 0.0,\n      0.0, elrcs.x, elrsn.x,\n      0.0, -elrsn.x, elrcs.x\n \t);\n\tmat3 roty = mat3(\n      elrcs.y, 0.0, -elrsn.y,\n      0.0, 1.0, 0.0,\n      elrsn.y, 0.0, elrcs.y\n\t);\n\tmat3 rotz = mat3(\n      elrcs.z, elrsn.z, 0.0, \n      -elrsn.z, elrcs.z, 0.0,\n      0.0, 0.0, 1.0\n\t);\n\tmat3 rotmat = rotx * roty * rotz;\n\tvNormal = rotmat[2]; // [x,y,z]\n\n\tmat3 trrotm = mat3(\n      rotmat[0][0], rotmat[1][0], rotmat[2][0],\n      rotmat[0][1], rotmat[1][1], rotmat[2][1],\n      rotmat[0][2], rotmat[1][2], rotmat[2][2]\n \t);\n \tnormX = trrotm[0];\n \tnormY = trrotm[1];\n \tnormZ = trrotm[2];\n}",c="precision highp float;\n#define GLSLIFY 1\n\nvarying vec3 normX;\nvarying vec3 normY;\nvarying vec3 normZ;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nfloat rstop = 0.1;\nfloat pAlpha = 1.0;\n\nuniform vec3 ambientLightColor;\nuniform float ambientStrength;\n\nstruct DirectionalLight {\n    vec3 target;\n    vec3 lightColor;\n    vec3 lightPos;\n    float diffuseFactor;\n    float specularFactor;\n};\n\nuniform DirectionalLight directionalLight;\n\n// pos orign r.ab\nfloat ellipse(vec2 p, vec2 o, vec2 r) { \n    vec2 lp = (p - o) / r;\n    return length(lp) - 1.0;\n}\n\nvec3 CalcDirLight(DirectionalLight light, vec3 normal, vec3 ambient)\n{\n    vec3 lightDir = normalize(light.lightPos - light.target);\n    vec3 viewDir = normalize(cameraPosition - vPosition);\n    vec3 halfwayDir = normalize(lightDir + viewDir);\n    // diffuse\n    vec3 diffuse = light.diffuseFactor  * max(dot(normal, lightDir),0.0) * light.lightColor;\n    // specular\n    float spec = pow(max(dot(normal, halfwayDir), 0.0), 32.0);\n    vec3 specular = light.specularFactor * spec * light.lightColor; \n\n    return (ambient + diffuse + specular);\n}\n\nvoid main() {\n\tvec3 p = vec3(gl_PointCoord - vec2(0.5, 0.5), 0.0) * 2.0;\n\tvec3 d = vec3(0.0, 0.0, -1.0);\n\tfloat nd = normZ.z; //dot(-normZ, d);\n\tif(abs(nd) < 0.0001) discard;\n\n\tfloat np = dot(normZ, p);\n    vec3 tp = p + d * np / nd;//dot(-normZ, d) / dot(-normZ, p);\n\t// Back 2D \n \tvec2 coord = vec2(dot(normX, tp), dot(normY, tp));\n\n\t// angle = 15 degree\n\tconst float flwrsn = 0.258819045102521;\n\tconst float flwrcs = 0.965925826289068;\n\tmat2 flwrm = mat2(flwrcs, -flwrsn, flwrsn, flwrcs);\n\t// abs => double [0,1]\n\tvec2 flwrp = vec2(abs(coord.x), coord.y) * flwrm;\n\tfloat r;\n\tif(flwrp.x < 0.0) {\n\t// middle part(double)\n\t\tr = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.36, 0.96) * 0.5);\n\t} else {\n\t\t// out part(double)\n\t\tr = ellipse(flwrp, vec2(0.065, 0.024) * 0.5, vec2(0.58, 0.96) * 0.5);\n\t}\n\tif(r > rstop) discard;\n    // r = ellipse(flwrp, vec2(0.250,0.440), vec2(0.140,0.190));\n    vec3 col = mix(vec3(1.0, 0.8, 0.75), vec3(1.0, 0.9, 0.87), r);\n    \n\tfloat grady = mix(0.0, 1.0, pow(coord.y * 0.5 + 0.5, 0.35));\n  \tcol *= vec3(1.0, grady, grady);\n\tcol *= mix(0.8, 1.0, pow(abs(coord.x), 0.3));\n    \n\tfloat alpha = (0.5 - r / (rstop * 1.0));\n\talpha = smoothstep(0.0, 1.0, alpha) * pAlpha;\n    \n\tvec3 baseColor = col*0.5;\n\tvec3 ambient = ambientStrength * ambientLightColor;\n    vec3 normal = normalize(vNormal);\n\tvec3 result = CalcDirLight(directionalLight, normal, ambient) * baseColor;\n\tgl_FragColor = vec4(result, alpha);\n}",m=2*Math.PI;function v(){return 2*Math.random()-1}var d=function(){function t(e){Object(a["a"])(this,t),this.scene=e,this.deltaTime=0,this.particleControl={particleNum:500,area:[20,20,50]},this.geometry=new l["c"],this.positions=new Float32Array(3*this.particleControl.particleNum),this.eulers=new Float32Array(3*this.particleControl.particleNum),this.sizes=new Float32Array(this.particleControl.particleNum),this.directionalLight={lightPos:new l["E"](-1,1,0),target:new l["E"](0,0,0),lightColor:new l["f"](16777215),diffuseFactor:2.5,specularFactor:6},this.initParticle()}return Object(s["a"])(t,[{key:"initParticle",value:function(){var t=this.particleControl,e=t.particleNum,r=t.area;t.particles=new Array(e);for(var i=new l["E"],n=0,o=0;o<e;o++){t.particles[o]=new u;var a=t.particles[o];i.x=.3*v()+.8,i.y=.2*v()-1,i.z=.3*v()+.5,i.normalize(),n=5+1*Math.random(),i.multiplyScalar(n),a.setVelocity(i.x,i.y,i.z),a.setRotation(v()*m*.5,v()*m*.5,v()*m*.5),a.setPosition(v()*r[0],v()*r[1],v()*r[2]),a.setEulerAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2,Math.random()*Math.PI*2),a.setSize(4+1*Math.random())}this.geometry.setAttribute("position",new l["b"](this.positions,3)),this.geometry.setAttribute("aEuler",new l["b"](this.eulers,3)),this.geometry.setAttribute("aSize",new l["b"](this.sizes,1)),this.uniforms={far:{type:"f",value:r[2]},ambientLightColor:{value:new l["f"](16777215)},ambientStrength:{value:2},directionalLight:{value:this.directionalLight}},this.points=new l["s"](this.geometry,new l["y"]({uniforms:this.uniforms,vertexShader:h,fragmentShader:c})),this.scene.add(this.points)}},{key:"repeatPos",value:function(t,e){for(var r=0;r<3;r++){var i=e[r];Math.abs(t.position[r])-.5*t.size>i&&(t.position[r]>0?t.position[r]-=2*i:t.position[r]+=2*i)}}},{key:"repeatEuler",value:function(t){for(var e=0;e<3;e++)t.euler[e]=t.euler[e]%m,t.euler[e]<0&&(t.euler[e]+=m)}},{key:"renderParticle",value:function(){for(var t=this.particleControl,e=t.particleNum,r=t.area,i=t.particles,n=0;n<e;n++){var o=i[n];o.update(this.deltaTime),this.repeatPos(o,r),this.repeatEuler(o),this.positions[3*n]=o.position[0],this.positions[3*n+1]=o.position[1],this.positions[3*n+2]=o.position[2],this.eulers[3*n]=o.euler[0],this.eulers[3*n+1]=o.euler[1],this.eulers[3*n+2]=o.euler[2],this.sizes[n]=o.size}this.geometry.attributes["position"].needsUpdate=!0,this.geometry.attributes["aEuler"].needsUpdate=!0,this.geometry.attributes["aSize"].needsUpdate=!0}},{key:"render",value:function(t){this.deltaTime=t,this.renderParticle()}}]),t}(),f="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform mat3 uvTransform;\nuniform vec2 uRatio;\n\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tvec2 screenPos = position.xy;\n\t// 还原比例\n\tscreenPos.x /= uRatio.x;\n\tscreenPos.y /= uRatio.y;\n\tfloat scale = max(uRatio.x, uRatio.y);\n\tscreenPos *= scale;\n\tgl_Position = vec4( screenPos, 0.9, 1.0 );\n}",p="#define GLSLIFY 1\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n}",g=r("11b7"),b=r("ffd8"),x=r("32bc"),y=function(){function t(e){Object(a["a"])(this,t),this.isMobile=Object(g["d"])(),this.scene=e,this.obj=null}return Object(s["a"])(t,[{key:"loadTexture",value:function(){var t=this,e=new l["B"],r=b;return this.isMobile&&(r=x),new Promise((function(i){e.load(r,(function(e){e.format=l["u"],e.needsUpdate=!0,t.texture=e,t.obj=t.createObj(),i(e)}))}))}},{key:"onResize",value:function(){var t=this.texture.image.width,e=this.texture.image.height,r=window.innerWidth,i=window.innerHeight,n={};n.x=r/t,n.y=i/e,this.mesh.material.uniforms.uRatio.value=new l["D"](n.x,n.y)}},{key:"createObj",value:function(){var t=this.texture;this.material=new l["y"]({type:"BackgroundMaterial",uniforms:{uvTransform:{value:new l["l"]},t2D:{value:null},uRatio:{value:new l["D"](1)}},vertexShader:f,fragmentShader:p,side:l["i"],blending:l["g"]});var e=this.mesh=new l["m"](new l["r"](2,2),this.material);return this.onResize(),e.geometry.deleteAttribute("normal"),e.material.uniforms.t2D.value=t,e.material.uniforms.uvTransform.value.copy(t.matrix),this.scene.add(e),e}}]),t}(),w=r("a1bb"),T=r("11a3"),S=r("6c1a"),P=(r("d81d"),r("b0c0"),r("b8bf"),r("9211")),M=r("6e58"),C=(r("a15b"),{shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new l["f"](0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")}),z=function(t,e,r,i){P["a"].call(this),this.strength=void 0!==e?e:1,this.radius=r,this.threshold=i,this.resolution=void 0!==t?new l["D"](t.x,t.y):new l["D"](256,256),this.clearColor=new l["f"](0,0,0);var n={minFilter:l["j"],magFilter:l["j"],format:l["u"]};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new l["F"](o,a,n),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var u=new l["F"](o,a,n);u.texture.name="UnrealBloomPass.h"+s,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var h=new l["F"](o,a,n);h.texture.name="UnrealBloomPass.v"+s,h.texture.generateMipmaps=!1,this.renderTargetsVertical.push(h),o=Math.round(o/2),a=Math.round(a/2)}void 0===C&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var c=C;this.highPassUniforms=l["C"].clone(c.uniforms),this.highPassUniforms["luminosityThreshold"].value=i,this.highPassUniforms["smoothWidth"].value=.01,this.materialHighPassFilter=new l["y"]({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var m=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(m[s])),this.separableBlurMaterials[s].uniforms["texSize"].value=new l["D"](o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms["blurTexture1"].value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms["blurTexture2"].value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms["blurTexture3"].value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms["blurTexture4"].value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms["blurTexture5"].value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms["bloomStrength"].value=e,this.compositeMaterial.uniforms["bloomRadius"].value=.1,this.compositeMaterial.needsUpdate=!0;var v=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms["bloomFactors"].value=v,this.bloomTintColors=[new l["E"](1,1,1),new l["E"](1,1,1),new l["E"](1,1,1),new l["E"](1,1,1),new l["E"](1,1,1)],this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,void 0===M["a"]&&console.error("UnrealBloomPass relies on CopyShader");var d=M["a"];this.copyUniforms=l["C"].clone(d.uniforms),this.copyUniforms["opacity"].value=1,this.materialCopy=new l["y"]({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:l["a"],depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new l["f"],this.oldClearAlpha=1,this.basic=new l["n"],this.fsQuad=new P["a"].FullScreenQuad(null)};z.prototype=Object.assign(Object.create(P["a"].prototype),{constructor:z,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var r=Math.round(t/2),i=Math.round(e/2);this.renderTargetBright.setSize(r,i);for(var n=0;n<this.nMips;n++)this.renderTargetsHorizontal[n].setSize(r,i),this.renderTargetsVertical[n].setSize(r,i),this.separableBlurMaterials[n].uniforms["texSize"].value=new l["D"](r,i),r=Math.round(r/2),i=Math.round(i/2)},render:function(t,e,r,i,n){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),n&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms["tDiffuse"].value=r.texture,this.highPassUniforms["luminosityThreshold"].value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);for(var a=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms["colorTexture"].value=a.texture,this.separableBlurMaterials[s].uniforms["direction"].value=z.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[s]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[s].uniforms["colorTexture"].value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms["direction"].value=z.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[s]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms["bloomStrength"].value=this.strength,this.compositeMaterial.uniforms["bloomRadius"].value=this.radius,this.compositeMaterial.uniforms["bloomTintColors"].value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms["tDiffuse"].value=this.renderTargetsHorizontal[0].texture,n&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.fsQuad.render(t)),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new l["y"]({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new l["D"](.5,.5)},direction:{value:new l["D"](.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new l["y"]({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),z.BlurDirectionX=new l["D"](1,0),z.BlurDirectionY=new l["D"](0,1);var D=r("3625"),U=r("495a"),F=function(){function t(e,r){Object(a["a"])(this,t),this.container=e,this.width=Object(g["b"])(e),this.height=Object(g["a"])(e),this.clock=new l["e"];var i=this.camera=new l["q"](45,this.width/this.height,1,500);i.position.set(0,0,10);var n=this.renderer=new l["G"]({antialias:!1});n.domElement.id="canvasWebGL",n.setPixelRatio(window.devicePixelRatio),n.setSize(this.width,this.height),n.gammaFactor=2.2,n.setClearColor(16777215,1),e.appendChild(n.domElement),this.initScene(r)}return Object(s["a"])(t,[{key:"initScene",value:function(t){var e=this,r=this.scene=new l["x"];this.sakura=new d(r),this.megumi=new y(r),this.megumi.loadTexture().then((function(){e.initPostProcessing(),e.initEntryAnime(),e.animete(),e.initEvents(),"function"===typeof t&&t()}))}},{key:"initPostProcessing",value:function(){this.composer=new w["a"](this.renderer),this.composer.addPass(new T["a"](this.scene,this.camera));var t=this.bloomPass=new z(new l["D"](this.width,this.height));t.strength=5,t.radius=.5,t.threshold=.995,this.composer.addPass(t);var e=this.vignettePass=new S["a"](D["a"]);e.uniforms["offset"].value=1e3,e.uniforms["darkness"].value=20,this.composer.addPass(e)}},{key:"initEntryAnime",value:function(){var t=this;new U["a"].Tween(this.bloomPass).to({strength:.4},1500).delay(800).easing(U["a"].Easing.Exponential.InOut).start(),new U["a"].Tween(this.vignettePass.uniforms.darkness).to({value:1},1500).easing(U["a"].Easing.Exponential.InOut).start(),new U["a"].Tween(this.vignettePass.uniforms.offset).to({value:1.2},1500).easing(U["a"].Easing.Exponential.InOut).onComplete((function(){t.enableTitleShowing=!0})).start()}},{key:"initEvents",value:function(){window.addEventListener("resize",this.onWindowResize.bind(this),!1)}},{key:"onWindowResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.megumi&&this.megumi.onResize(),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.composer&&this.composer.setSize(this.width,this.height)}},{key:"animete",value:function(){var t=this.clock.getDelta();this.sakura.render(t),U["a"].update(),this.composer.render(),requestAnimationFrame(this.animete.bind(this))}}]),t}(),j={name:"container",mounted:function(){var t=document.querySelector("#canvasContainer");this.scene=new F(t,(function(){document.querySelector("#wrapper").classList.remove("isLoading")}))},methods:{toPrePage:function(){window.location.href="./index"}}},k=j,B=(r("1a2e"),r("2877")),O=Object(B["a"])(k,n,o,!1,null,null,null),E=O.exports;new i["a"]({render:function(t){return t(E)}}).$mount("#container")},ffd8:function(t,e,r){t.exports=r.p+"img/megumi.928745e7.png"}});